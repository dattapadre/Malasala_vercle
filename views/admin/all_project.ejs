<%- include("Navbar") %>

<div class="container bg-white p-4 mt-4">
  <div class="row mb-4">
    <div class="col-md-12">
      <div class="banner d-flex align-items-center rounded-3">
        <h3 class="text-white px-3">
          <a href="/admin/dashbord" class="text-white text-decoration-none"
            >Admin</a
          >
          <i class="fa-solid fa-chevron-right"></i> All Painting
        </h3>
        <div class="stripes"></div>
      </div>
    </div>
  </div>

  <div class="table-responsive border p-4 rounded">
    <table
      id="paintingsTable"
      class="table table-bordered table-striped text-center align-middle"
    >
      <thead>
        <tr>
          <th>Sr.No</th>
          <th>Type</th>
          <th class="d-none d-md-table-cell">Size</th>
          <th class="d-none d-md-table-cell">Without Frame Price</th>
          <th class="d-none d-md-table-cell">With Frame Price</th>
          <th>Image 1</th>
          <th class="d-none d-md-table-cell">Image 2</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% data.forEach((item, i) => { %>
        <tr>
          <td><%= i + 1 %></td>
          <td><%= item.painting_type %></td>

          <td class="d-none d-md-table-cell"><%= item.size %></td>
          <td class="d-none d-md-table-cell">
            ₹<%= item.without_frame_price %>
          </td>
          <td class="d-none d-md-table-cell">₹<%= item.with_frame_price %></td>

          <td>
            <img
              src="/upload/<%= item.image1 %>"
              style="height: 60px; cursor: pointer"
              class="img-thumbnail"
              data-bs-toggle="modal"
              data-bs-target="#imageModal"
              onclick="showImage('/upload/<%= item.image1 %>')"
            />
          </td>

          <td class="d-none d-md-table-cell">
            <% if (item.image2) { %>
            <img
              src="/upload/<%= item.image2 %>"
              style="height: 60px; cursor: pointer"
              class="img-thumbnail"
              data-bs-toggle="modal"
              data-bs-target="#imageModal"
              onclick="showImage('/upload/<%= item.image2 %>')"
            />
            <% } else { %>
            <span>No Image</span>
            <% } %>
          </td>

          <td>
<a
  href="/admin/projects_delete/<%= item.painting_id %>"
  class="btn btn-sm btn-danger my-1"
  onclick="return confirm('Are you sure?')">
  <i class="fa-solid fa-trash"></i>
</a>

          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-transparent border-0 shadow-lg">
      <div class="modal-header border-0 bg-white rounded-top">
        <button
          type="button"
          class="btn-close ms-auto"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div
        class="modal-body d-flex justify-content-center align-items-center p-2"
        style="background: rgba(0, 0, 0, 0.8); border-radius: 0 0 1rem 1rem"
      >
        <img
          id="modalImage"
          src=""
          class="img-fluid rounded shadow-lg zoom-effect"
          style="max-height: 80vh; object-fit: contain"
        />
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script>
  function showImage(src) {
    document.getElementById("modalImage").src = src;
  }

  $(document).ready(function () {
    $("#paintingsTable").DataTable({
      dom: '<"d-flex justify-content-between align-items-center mb-3"fB>rtip',
      buttons: [],
      pageLength: 5,
      lengthChange: false,
      order: [[0, "asc"]],
      language: { search: "", searchPlaceholder: "Search..." },
    });
  });
</script>

<style>
  /* ... existing styles ... */

  div.dataTables_wrapper div.dataTables_paginate {
    display: flex;
    justify-content: flex-end !important;
    padding-top: 1rem;
  }

  /* ... rest of styles ... */
</style>

<!-- Styles -->
<style>
  /* Align pagination to right */
  .dataTables_wrapper .dataTables_paginate {
    text-align: right !important;
  }

  .zoom-effect {
    transition: transform 0.3s ease;
  }
  .zoom-effect:hover {
    transform: scale(1.03);
  }

  .dt-buttons .btn {
    margin-right: 5px;
    margin-top: 10px;
  }

  /* ✅ Align pagination to right */
  .dataTables_wrapper .dataTables_paginate {
    text-align: right !important;
  }

  .dataTables_wrapper .dataTables_paginate .paginate_button {
    padding: 2px 4px;
    font-size: 12px;
    color: #d62828 !important;
  }

  .dataTables_wrapper .dataTables_paginate .page-item.active .page-link {
    background-color: #003049 !important;
    color: white !important;
    border-color: #003049 !important;
  }

  table.dataTable thead th {
    background-color: #003049 !important;
    color: #fff !important;
  }

  .btn-print {
    background-color: #f77f00;
    color: #fff;
  }

  .btn-print:hover {
    background-color: #003049;
    color: #fff;
  }

  .dataTables_filter input {
    border: 1px solid #d62828;
    border-radius: 0.25rem;
    padding: 0.375rem 0.75rem;
    width: auto;
    margin-left: 5px;
  }

  .dataTables_filter label {
    font-weight: 500;
  }
</style>

<%- include("Footer") %>

<!-- JS Libraries for DataTables -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
